{% extends "staff/base.html" %}

{% block page_title %}My Permissions - Staff Management{% endblock %}

{% block staff_content %}
<!-- Page Header -->
<div class="staff-mb-4">
    <h1 class="staff-heading staff-heading-2">
        <i class="fas fa-key me-2" aria-hidden="true"></i>
        My Permissions
    </h1>
    <p class="staff-text staff-mt-1">View your assigned permissions and access levels</p>
</div>

<!-- Two Column Layout -->
<div class="staff-grid staff-grid-2 staff-gap-4">
    
    <!-- Custom Permissions -->
    <div class="staff-card">
        <div class="staff-card-header">
            <h2 class="staff-heading staff-heading-4" style="margin: 0;">
                <i class="fas fa-shield-alt me-2" aria-hidden="true"></i>
                Custom Permissions
            </h2>
        </div>
        <div class="staff-card-body">
            {% if custom_permissions %}
                <ul class="staff-list" role="list" aria-label="Custom permissions">
                    {% for perm in custom_permissions %}
                    <li class="staff-list-item">
                        <div class="staff-list-item-content">
                            <div class="staff-list-item-title">{{ perm.get_permission_display }}</div>
                            {% if perm.expires_at %}
                            <div class="staff-list-item-subtitle">
                                Expires: {{ perm.expires_at|date:"M d, Y" }}
                            </div>
                            {% endif %}
                        </div>
                        <span class="staff-badge staff-badge-success">Active</span>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="staff-empty" role="status">
                    <i class="fas fa-shield-alt staff-empty-icon" aria-hidden="true"></i>
                    <h5>No Custom Permissions</h5>
                    <p>You don't have any custom permissions assigned.</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Group Permissions -->
    <div class="staff-card">
        <div class="staff-card-header">
            <h2 class="staff-heading staff-heading-4" style="margin: 0;">
                <i class="fas fa-users me-2" aria-hidden="true"></i>
                Group Permissions
            </h2>
        </div>
        <div class="staff-card-body">
            {% if group_permissions %}
                <ul class="staff-list" role="list" aria-label="Group permissions">
                    {% for perm in group_permissions %}
                    <li class="staff-list-item">
                        <div class="staff-list-item-title" style="font-weight: 500;">
                            {{ perm|cut:"can_"|title }}
                        </div>
                        <span class="staff-badge staff-badge-primary">Group</span>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="staff-empty" role="status">
                    <i class="fas fa-users staff-empty-icon" aria-hidden="true"></i>
                    <h5>No Group Permissions</h5>
                    <p>You don't belong to any groups with permissions.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
